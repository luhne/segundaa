---
title: "Análise exploratória de dados"
subtitle: ""
author: "Sara Mortara, Andrea Sanchez-Tapia, Diogo S. B. Rocha"
date: "aula 5"
output: beamer_presentation
fonttheme: "professionalfonts"

header-includes:
  - \usepackage{longtable,booktabs}
  - \usepackage{graphicx}
  - \usepackage{float}
  - \usepackage{xcolor}
  - \usepackage{subfig}
  - \definecolor{cor1}{HTML}{E1BD6D}
  - \definecolor{cor2}{HTML}{EABE94}
  - \definecolor{cor3}{HTML}{0B775E}
  - \definecolor{cor4}{HTML}{35274A}
  - \definecolor{cor5}{HTML}{F2300F}
  - \setbeamercolor{title}{fg=cor3}
  - \setbeamercolor{frametitle}{fg=cor4}
  - \setbeamercolor{structure}{fg=cor5}
  - \renewcommand\alert[1]{\textcolor{cor5}{#1}}
---

## sobre a aula

1. análise exploratória de dados

2. estatísticas descritivas

3. gráficos

4. relações entre variáveis

5. extra: PCA \& regressão linear


# 1. análise exploratória de dados (AED)
 
## a vida sem análise exploratória de dados


\begin{figure}[!htbp]
\includegraphics[scale=0.31]{figs/reflexo.png}
\end{figure}

## \emph{Explanatory Data Analysis} de John Tukey

\begin{figure}

\subfloat{{ \includegraphics[scale=0.4]{figs/tukey.jpg} }}
 \qquad
 \hspace{0.6cm}
\subfloat{{ \includegraphics[scale=0.5]{figs/John_Tukey.jpg} }}

\end{figure}

## conheça seus dados!

\center \includegraphics{figs/pee.jpg}


## objetivos da AED

1. \pause controlar a qualidade dos dados

2. \pause sugerir hipóteses para os padrões observados

3. \pause apoiar a escolha dos procedimentos estatísticos de testes de hipótese

4. \pause avaliar se os dados atendem às premissas dos procedimentos estatísticos escolhidos

5. \pause indicar novos estudos e hipóteses 


## \Huge \alert{alerta!}


\pause análise exploratória não é \alert{tortura} de dados

\center
\includegraphics[scale=.2]{figs/tortura.jpg}

\pause assume-se que pesquisador(a) formulou \emph{a priori} \textbf{hipóteses} plausíveis amparadas pela \textbf{teoria}

## dicas

\begin{itemize}

\pause \item pode levar entre 20 e 50\% do tempo das análises

\pause \item deve ser iniciada ainda durante a coleta de dados

\pause \item utiliza-se largamente técnicas visuais

\end{itemize}

\center \includegraphics[scale=0.3]{figs/cover.png}

## importânica do gráfico e quarteto de \alert{Anscombe}

\begin{itemize}

\item criado pelo matemático Francis Ascombe

\item 4 conjuntos de dados com as mesmas estatísticas descritivas, mas muito diferentes graficamente

\end{itemize}


\center \includegraphics[scale=0.8]{figs/Francis_Anscombe.jpeg}

## os dados de \alert{Anscombe}

```{r, echo=FALSE}
library(wesanderson)
cor <- wes_palette("Rushmore1") #("FantasticFox1")
```


\scriptsize
```{r, echo=TRUE}
# claro que o conjunto já existe dentro do R
data("anscombe")
```

```{r, echo=TRUE}
# média dos dados
apply(anscombe, 2, mean)
```

```{r, echo=TRUE}
# variância dos dados
apply(anscombe, 2, var)
```


## vamos olhar para os dados

```{r,echo=FALSE}
anscombe
```


## correlação entre x e y 

```{r, echo=TRUE}
# correlação
cor(anscombe$x1, anscombe$y1)
cor(anscombe$x2, anscombe$y2)
cor(anscombe$x3, anscombe$y3)
cor(anscombe$x4, anscombe$y4)
```

## coeficientes da regressão linear de x e y

\scriptsize
```{r, echo=TRUE}
# coeficientes da regressão
coef(lm(anscombe$y1 ~ anscombe$x1))
coef(lm(anscombe$y2 ~ anscombe$x2))
coef(lm(anscombe$y3 ~ anscombe$x3))
coef(lm(anscombe$y4 ~ anscombe$x4))
```


## agora sim vamos olhar para os dados do Anscombe

```{r, echo=FALSE, fig.align='center', fig.width=3.8, fig.height=3.5}
cor.c <- "grey40"
par(mfrow=c(2,2), bty='l', las=1, mar=c(3.8, 3.8, 2, 2))
plot(y1 ~ x1, data=anscombe, pch=19, col=cor[2])
abline(lm(y1 ~ x1, data=anscombe), lwd=2, col=cor.c)
plot(y2 ~ x2, data=anscombe, pch=19, col=cor[3])
abline(lm(y2 ~ x2, data=anscombe), lwd=2, col=cor.c)
plot(y3 ~ x3, data=anscombe, pch=19, col=cor[4])
abline(lm(y3 ~ x3, data=anscombe), lwd=2, col=cor.c)
plot(y4 ~ x4, data=anscombe, pch=19, col=cor[5])
abline(lm(y4 ~ x4, data=anscombe), lwd=2, col=cor.c)
par(mfrow=c(1,1))
```

## perguntas que nos devemos fazer

1. Onde os dados estão centrados? Como os dados estão distribuídos? Os dados são simétricos, assimétricos, bimodais?

2. Existem outliers?

3. As variáveis seguem uma distribuição normal?

4. Existem relações entre as variáveis? As relações entre variáveis são lineares?

5. As variáveis precisam ser transformadas?

6. O esforço amostral foi o mesmo para cada observação ou variável?

# 2. estatísticas descritivas

## conferência de dados no R

```{r, echo=TRUE}
# lendo os dados da idade da população que usa fraldas
#fraldas <- read.csv("../data/idade_fraldas.csv")
```

# 3. gráficos

# 4. relações entre variáveis

# 5. extra: PCA \& regressão linear
